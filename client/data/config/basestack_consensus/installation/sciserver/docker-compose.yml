version: '2'

services:
    artic:
        build:
            context: .
            dockerfile: Dockerfile
        image: artic-custom
        container_name: artic
#        storage_opt:
#            size: '20G'
#        volumes:
#            - type: bind
#              source: ./20200514_2000_X3_FAN44250_e97e74b4/
#              target: /home/idies/workspace/covid19/sequencing_runs/example-run
#              command: "bash -c \"source /home/idies/workspace/covid19/bashrc\" && artic-module1-barcode-demux.sh -i /home/idies/workspace/covid19/sequencing_runs/example-run"

# I'm not sure how to get this bind mount to work using docker-compose
# docker run -it --mount type=bind,source="$(pwd)"/20200514_2000_X3_FAN44250_e97e74b4/,target=/home/idies/workspace/covid19/sequencing_runs/example-run artic-custom bash && source /home/idies/workspace/covid19/bashrc