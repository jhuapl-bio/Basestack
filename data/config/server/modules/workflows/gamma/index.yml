staphb_gamma:
  title: "Gamma"
  icon: "book"
  module: True
  tooltip: "AMR resistance analysis Pipeline"
  dependencies:
    - target: "staphb/gamma"
      label: "staphb/gamma"
      type: "docker"
      format: "docker"
    - source: 
        url: "https://raw.githubusercontent.com/rastanton/GAMMA/main/ResFinderDB_Combined_05-06-20.fsa"
        type: "file"
        remove: true
        target: "${writePath}/workflows/gamma/resfinder_combined.fsa"
      type: "download" 
      format: "file"
      label: "Gamma ResFinder Combined File"
      target: "${writePath}/workflows/gamma/resfinder_combined.fsa"
      overwrite: true 
    - source: 
        url: "git clone https://bitbucket.org/genomicepidemiology/resfinder_db.git"
        type: "dir"
        remove: false
        target: "${writePath}/workflows/gamma/gamma"
      type: "orchestration" 
      format: "dir"
      target: "${writePath}/workflows/gamma/resfinder_db"
      bind: "${writePath}/workflows/gamma:/tmp"
      workingdir: "/tmp"
      command: ["bash", "-c", "rm -rf /tmp/resfinder_db; git clone https://bitbucket.org/genomicepidemiology/resfinder_db.git"]
      overwrite: true
      label: "AMR ResFinder Database"
   