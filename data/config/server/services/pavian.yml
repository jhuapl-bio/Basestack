pavian_default:
  depends: 
    - type: "module"
      id: "pavian"
  image: "florianbw/pavian"
  continuous: true
  orchestrated: false #orchestrated means it r
  init: true
  command: [ 'bash', '-c', 'Rscript -e  "host <- \"0.0.0.0\"; pavian::runApp(port=80,host=host,maxUploadSize=900*1024^2)" ' ]
  hideStatus: true
  label: "Pavian Default"
  force_restart: true
  ports:  
    - 8087:80
  variables:
    port:
      column: 12
      element: "render"
      port: true
      bind:
        from: "80"
        to: "8087"
pavian_orchestrated:
  depends: 
    - type: "module"
      id: "dind"
  # command: ['bash', '-c', 'ls -lht']
  command: ['docker-compose', 'up', '--force-recreate', '--always-recreate-deps', 'pavian']
  init: false
  hideStatus: true
  label: "Pavian Orchestrated"
  force_restart: false
  config: null
  continuous: true
  workingdir: /opt/app/pavian
  orchestrated: true #orchestrated means it runs from dind rather than natively on host
  variables:
    composer: 
      element: null
      bind: /opt/app
      bind_parent_dir: true
      source: "${configPath}/modules/workflows/pavian/docker-compose.yml"
    port:
      column: 12
      port: true
      element: "render"
      bind:
        from: "80"      
        to: "8097"
    